<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Confirmação</title>
  <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
</head>
<body>
  <h1>Ingressos Gerados!</h1>
  <div id="conteudo"></div>
  <button onclick="enviarWhats()">Enviar por WhatsApp</button>

  <script>
    const ingresso = JSON.parse(localStorage.getItem("ingressoFinal"));
    const div = document.getElementById("conteudo");

    if (ingresso) {
      div.innerHTML = `
        <p><strong>Pedido:</strong> ${ingresso.pedido}</p>
        <p><strong>Gênero:</strong> ${ingresso.genero}</p>
        <p><strong>CPF:</strong> ${ingresso.cpf}</p>
        <p><strong>Valor:</strong> R$ ${ingresso.valor.toFixed(2)}</p>
      `;

      const canvas = document.createElement("canvas");
      new QRious({
        element: canvas,
        value: "Pedido: " + ingresso.pedido + "\\nCPF: " + ingresso.cpf,
        size: 200
      });
      div.appendChild(canvas);
    }

    function enviarWhats() {
      const numero = "5543991289991";
      const texto = `Olá, comprei ingresso do Arretados:%0APedido: ${ingresso.pedido}%0ACPF: ${ingresso.cpf}%0AGênero: ${ingresso.genero}%0AValor: R$ ${ingresso.valor}`;
      window.open(`https://wa.me/${numero}?text=${texto}`, "_blank");
    }
  </script>
</body>
</html>
